---
- name: Converge
  hosts: all
  become: yes
  gather_facts: yes

  roles:
    - role: robertdebock.mysql
      mysql_databases:
        - name: test_db
          encoding: utf8
          collation: utf8_bin
    - role: ansible-role-backup
      backup_directory: backups
      backup_remote_directory: /tmp
      backup_cleanup: yes
      backup_timestamp: "{{ ansible_date_time.date }}"
      backup_format: gz
      backup_objects:
        - name: home
          type: directory
          source: /home
        - name: test_db
          type: mysql
          source: test_db
          format: zip
